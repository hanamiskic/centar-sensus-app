<!-- Back iznad kartice, poravnat sa sadržajem -->
<div class="detail-back">
  <a href="" (click)="goBack($event)" class="back-button" aria-label="Natrag">&#x276E;</a>
</div>

<section class="event-detail" *ngIf="!notFound; else nf">
  <div class="left">
    <header class="detail-header">
      <h1 class="title">{{ event?.naslov }}</h1>
    </header>

    <dl class="meta-list">
      <div class="row" *ngIf="event?.opis">
        <dt><span class="icon">📝</span> Opis:</dt>
        <dd class="opis-text">{{ event?.opis }}</dd>
      </div>

      <div class="row" *ngIf="event?.datumVrijeme as d">
        <dt><span class="icon">🗓️</span> Datum i vrijeme:</dt>
        <dd>{{ d | date:'dd.MM.yyyy. HH:mm' }}</dd>
      </div>

      <div class="row" *ngIf="event?.mjesto">
        <dt><span class="icon">📍</span> Mjesto održavanja:</dt>
        <dd>{{ event?.mjesto }}</dd>
      </div>

      <div class="row" *ngIf="event?.ciljnaPopulacija">
        <dt><span class="icon">🎯</span> Ciljna populacija:</dt>
        <dd>{{ event?.ciljnaPopulacija }}</dd>
      </div>

      <div class="row" *ngIf="event?.maxSudionika !== null">
        <dt><span class="icon">👥</span> Maks. sudionika:</dt>
        <dd>
          <ng-container *ngIf="isUnlimited; else finiteMax">
            <span class="value infinity" aria-label="neograničeno">∞</span>
          </ng-container>
          <ng-template #finiteMax>{{ event?.maxSudionika }}</ng-template>
        </dd>
      </div>
    </dl>
  </div>

  <!-- 🔼 Premješteno IZNAD slike -->
  <div class="actions" *ngIf="isLoggedIn && isActive">
    <div class="capacity">
      <span class="label">Prijavljeno:</span>
      <span class="count">
        <ng-container *ngIf="isAdmin; else totalStatic">
          <button class="num-btn" type="button" title="Prikaži prijavljene" (click)="openRegistrationsModal()">
            {{ totalCount }}
          </button>
        </ng-container>
        <ng-template #totalStatic>
          <strong class="num">{{ totalCount }}</strong>
        </ng-template>

        <span class="slash">/</span>
        <ng-container *ngIf="isUnlimited; else finiteCap">
          <span class="value infinity" aria-label="neograničeno">∞</span>
        </ng-container>
        <ng-template #finiteCap>
          <strong class="num">{{ event?.maxSudionika }}</strong>
        </ng-template>
      </span>
    </div>

    <button class="reg-btn"
      [class.secondary]="isRegistered"
      [disabled]="regLoading || (!isRegistered && isFull)"
      (click)="onToggleRegistration()"
      [attr.aria-busy]="regLoading ? 'true' : null">
      <ng-container *ngIf="!isRegistered; else odjava">Prijavi se</ng-container>
      <ng-template #odjava>Odjavi se</ng-template>
    </button>
  </div>
  <!-- 🔽 Slika sada dolazi nakon akcija -->
  <aside class="right" *ngIf="event?.imageUrl">
    <img class="poster" [src]="event?.imageUrl" [alt]="event?.naslov" />
  </aside>
</section>

<ng-template #nf>
  <div class="detail-back">
    <a href="" (click)="goBack($event)" class="back-button" aria-label="Natrag">←</a>
  </div>
  <section class="event-detail">
    <h2 class="title">Događaj nije pronađen</h2>
  </section>
</ng-template>

<!-- modal ostaje isti -->
